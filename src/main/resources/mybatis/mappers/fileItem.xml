<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="fileItem">
	
	<select id="getBusinessByNo" parameterType="string" resultType="com.erp.vo.FileItem">
		select bss_no as no,
			   bss_title as title,
			   bss_memo as memo,
			   bss_start_date as startDate,
			   bss_end_date as endDate,
			   bss_file_name as fileName,
			   bss_status as status,
			   emp_no as empNo,
			   manager_no as managerNo,
			   bss_created_date as createdDate
		from erp_business
		where bss_no = #{value}
	</select>

	<select id="getFileItem" resultType="com.erp.vo.FileItem">
		select bss_no as no,
			   bss_file_name as fileName
		from erp_business
		where bss_no = #{no}
	</select>
	<insert id="insertFileItem" parameterType="com.erp.vo.FileItem">
		insert erp_business
		(bss_no, bss_file_name)
		values
		(to_char(sysdate, 'yymm') || '2' || lpad(erp_bss_seq.nextval, 3,0), #{fileName})
	</insert>
</mapper>